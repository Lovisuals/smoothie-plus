<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smoothie Verse | Zero Cost</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #000; color: white; }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }

        /* Animations */
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }
        .shimmer-card {
            background: linear-gradient(to right, #0f172a 4%, #1e293b 25%, #0f172a 36%);
            background-size: 1000px 100%;
            animation: shimmer 20s infinite linear;
        }
        
        /* Glassmorphism */
        .glass {
            background: rgba(15, 23, 42, 0.7);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .float-card:hover { transform: translateY(-5px); box-shadow: 0 10px 30px -10px rgba(74, 222, 128, 0.2); }
    </style>
</head>
<body class="bg-black min-h-screen pb-20 selection:bg-green-500 selection:text-black">

    <div id="loadingMsg" class="fixed inset-0 z-[60] flex flex-col items-center justify-center bg-black transition-opacity duration-500">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-green-400 mb-4"></div>
        <h2 class="text-green-400 font-bold tracking-widest animate-pulse">LOADING MENU...</h2>
    </div>

    <nav class="fixed top-0 w-full z-40 glass px-4 py-3 flex justify-between items-center">
        <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-gradient-to-tr from-green-400 to-emerald-600 rounded-lg flex items-center justify-center shadow-[0_0_15px_rgba(74,222,128,0.5)]">
                <i class="fas fa-leaf text-black text-sm"></i>
            </div>
            <h1 class="font-bold text-lg tracking-tight">Zero<span class="text-green-400">Cost</span></h1>
        </div>
        <div class="relative cursor-pointer" onclick="toggleCart()">
            <i class="fas fa-shopping-bag text-xl text-gray-300 hover:text-white transition"></i>
            <span id="cartBadge" class="absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full hidden">0</span>
        </div>
    </nav>

    <header class="pt-24 pb-6 px-4">
        <div class="bg-gradient-to-r from-green-900/20 to-blue-900/20 rounded-2xl p-6 border border-white/5 text-center relative overflow-hidden">
            <div class="absolute top-0 right-0 w-32 h-32 bg-green-500/10 blur-3xl rounded-full"></div>
            <h2 class="text-2xl font-bold mb-2">Fresh. Organic. <span class="text-green-400">Yours.</span></h2>
            <p class="text-gray-400 text-xs max-w-md mx-auto">100% Natural ingredients delivered instantly.</p>
        </div>
    </header>

    <div id="investorPanel" class="hidden px-4 mb-6">
        <div class="bg-slate-900 border border-yellow-500/30 rounded-xl p-4">
            <h3 class="text-yellow-500 text-xs font-bold uppercase tracking-widest mb-3 border-b border-white/10 pb-2">
                <i class="fas fa-lock mr-2"></i>Investor Insight
            </h3>
            <div class="grid grid-cols-3 gap-2 text-center mb-4">
                <div class="bg-black/40 p-2 rounded-lg">
                    <p class="text-[10px] text-gray-400">Total Rev</p>
                    <p class="text-white font-bold text-sm">₦1.2M</p>
                </div>
                <div class="bg-black/40 p-2 rounded-lg">
                    <p class="text-[10px] text-gray-400">Margin</p>
                    <p class="text-green-400 font-bold text-sm">42%</p>
                </div>
                <div class="bg-black/40 p-2 rounded-lg">
                    <p class="text-[10px] text-gray-400">Orders</p>
                    <p class="text-blue-400 font-bold text-sm">840</p>
                </div>
            </div>
            <div id="investorProductGrid" class="space-y-2 max-h-32 overflow-y-auto pr-1 custom-scroll">
                </div>
        </div>
    </div>

    <main class="px-4 pb-24">
        <div class="flex justify-between items-end mb-4">
            <h2 class="text-xl font-bold">Menu</h2>
            <div class="flex gap-2">
                <span class="text-[10px] bg-white/10 px-2 py-1 rounded-md text-gray-300">All</span>
                <span class="text-[10px] bg-white/5 px-2 py-1 rounded-md text-gray-500">Green</span>
                <span class="text-[10px] bg-white/5 px-2 py-1 rounded-md text-gray-500">Berry</span>
            </div>
        </div>
        
        <div id="menuGrid" class="grid grid-cols-2 md:grid-cols-4 gap-4">
            </div>
    </main>

    <footer class="text-center text-gray-600 text-[10px] pb-8">
        <p>Zero Cost Smoothies © 2024</p>
        <button onclick="toggleAdmin()" class="mt-4 text-gray-800 hover:text-gray-500 transition">
            <i class="fas fa-fingerprint"></i> Admin Access
        </button>
    </footer>

    <div id="cartModal" class="fixed inset-0 z-50 bg-black/90 hidden backdrop-blur-sm flex flex-col justify-end sm:justify-center sm:items-center transition-all">
        <div class="bg-[#0f172a] w-full sm:w-96 rounded-t-3xl sm:rounded-2xl border-t sm:border border-white/10 p-6 shadow-2xl animate-slide-up relative">
            
            <div class="flex justify-between items-center mb-6 border-b border-white/10 pb-4">
                <h2 class="text-xl font-bold">Your Cart</h2>
                <button onclick="toggleCart()" class="text-gray-400 hover:text-white"><i class="fas fa-times text-xl"></i></button>
            </div>

            <div id="cartItems" class="max-h-60 overflow-y-auto mb-4 space-y-3">
                <p class="text-gray-500 text-center text-sm py-4">Your cart is empty.</p>
            </div>

            <div class="border-t border-white/10 pt-4">
                <div class="flex justify-between mb-4 text-lg font-bold">
                    <span>Total</span>
                    <span class="text-green-400">₦<span id="cartTotal">0</span></span>
                </div>
                <button onclick="checkoutWhatsApp()" class="w-full bg-green-500 hover:bg-green-600 text-black font-bold py-3 rounded-xl transition flex justify-center items-center gap-2">
                    <i class="fab fa-whatsapp text-lg"></i> Checkout via WhatsApp
                </button>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-white text-black px-6 py-3 rounded-full shadow-2xl z-[70] translate-y-20 opacity-0 transition-all duration-300 flex items-center gap-2 font-bold text-sm">
        <i class="fas fa-check-circle text-green-600"></i>
        <span>Added to cart</span>
    </div>

    <script>
        // CONFIGURATION
        const STORE_CONFIG = {
            whatsappNumber: "2348000000000", // Replace with your number
            products: [
                { id: 1, name: "Green Glow", price: 3500, img: "https://images.unsplash.com/photo-1610970881699-44a5587cabec?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" },
                { id: 2, name: "Berry Blast", price: 4000, img: "https://images.unsplash.com/photo-1623065422902-30a2d299bbe4?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" },
                { id: 3, name: "Mango Madness", price: 3000, img: "https://images.unsplash.com/photo-1623065422902-30a2d299bbe4?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" }, // Placeholder img
                { id: 4, name: "Choco Protein", price: 5000, img: "https://images.unsplash.com/photo-1577805947697-89e18249d767?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" },
                { id: 5, name: "Tropical Haze", price: 3800, img: "https://images.unsplash.com/photo-1546173159-315724a31696?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" },
                { id: 6, name: "Avocado Power", price: 4500, img: "https://images.unsplash.com/photo-1603569283847-aa295f0d016a?ixlib=rb-1.2.1&auto=format&fit=crop&w=600&q=80" }
            ]
        };

        // STATE
        let cart = [];
        let adminMode = false;

        // --- CORE FUNCTIONS ---

        // 1. Render Menu (INCLUDES THE FIX)
        function renderMenu() {
            const c = document.getElementById('menuGrid');
            let h = '';

            // Customer Cards
            STORE_CONFIG.products.forEach(p => {
                const edit = adminMode ? 'contenteditable="true" class="bg-white/10 rounded px-1 border border-dashed border-yellow-500/50"' : '';
                const clickAction = adminMode ? '' : `onclick="showProductDetails(${p.id})"`; // Modal placeholder
                
                h += `
                <div class="float-card bg-[#0f172a] border border-white/5 rounded-2xl p-3 shadow-lg flex flex-col justify-between cursor-pointer active:scale-95 transition-all shimmer-card relative overflow-hidden group">
                    <div class="h-32 w-full rounded-xl mb-3 overflow-hidden bg-black relative">
                        <img src="${p.img}" class="object-cover w-full h-full opacity-90 group-hover:opacity-100 group-hover:scale-110 transition duration-500" loading="lazy">
                        ${adminMode ? '<div class="absolute top-1 right-1 bg-yellow-500 text-black text-[9px] font-bold px-1 rounded">EDIT</div>' : ''}
                    </div>
                    
                    <div>
                        <h3 ${edit} class="font-bold text-sm uppercase mb-1 text-white leading-tight">${p.name}</h3>
                        <div class="flex justify-between items-center mt-3">
                            <span class="text-green-400 font-bold text-sm">₦<span ${edit}>${p.price.toLocaleString()}</span></span>
                            ${!adminMode ? `
                            <button onclick="event.stopPropagation(); addToCart('${p.name}', ${p.price})" class="bg-white text-black text-[10px] font-bold px-3 py-1.5 rounded-lg hover:bg-gray-200 transition">
                                + ADD
                            </button>` : ''}
                        </div>
                    </div>
                </div>`;
            });

            c.innerHTML = h;

            // --- THE CRITICAL FIX: HIDE LOADER ---
            const loadingMsg = document.getElementById('loadingMsg');
            if (loadingMsg) {
                // Small timeout to ensure the DOM paint is visible first
                setTimeout(() => {
                    loadingMsg.style.opacity = '0';
                    setTimeout(() => loadingMsg.style.display = 'none', 500);
                }, 500); // 0.5s artificial delay for effect
            }

            // Investor Grid Logic
            renderInvestorGrid();
        }

        // 2. Render Investor Grid (Admin Only)
        function renderInvestorGrid() {
            const invGrid = document.getElementById('investorProductGrid');
            if(invGrid) {
                let invHtml = '';
                STORE_CONFIG.products.forEach(p => {
                    // Calculate 60% Cost / 40% Margin Logic
                    const cost = Math.round(p.price * 0.6);
                    const margin = p.price - cost;
                    invHtml += `
                    <div class="flex items-center justify-between bg-black/20 p-2 rounded border border-white/5">
                        <div class="flex items-center gap-2">
                            <img src="${p.img}" class="w-6 h-6 rounded-full object-cover">
                            <p class="text-white text-[10px] font-bold">${p.name}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-gray-500 text-[8px]">Cost: ₦${cost}</p>
                            <p class="text-green-400 text-[9px] font-bold">+₦${margin}</p>
                        </div>
                    </div>`;
                });
                invGrid.innerHTML = invHtml;
            }
        }

        // 3. Cart Logic
        function addToCart(name, price) {
            cart.push({ name, price });
            updateCartUI();
            showToast(`Added ${name}`);
        }

        function updateCartUI() {
            document.getElementById('cartBadge').innerText = cart.length;
            document.getElementById('cartBadge').style.display = cart.length > 0 ? 'block' : 'none';
            
            const list = document.getElementById('cartItems');
            const totalEl = document.getElementById('cartTotal');
            
            if (cart.length === 0) {
                list.innerHTML = '<p class="text-gray-500 text-center text-sm py-4">Your cart is empty.</p>';
                totalEl.innerText = '0';
                return;
            }

            let html = '';
            let total = 0;
            
            cart.forEach((item, index) => {
                total += item.price;
                html += `
                <div class="flex justify-between items-center bg-white/5 p-3 rounded-lg border border-white/5">
                    <span class="text-sm font-medium">${item.name}</span>
                    <div class="flex items-center gap-3">
                        <span class="text-green-400 text-sm">₦${item.price.toLocaleString()}</span>
                        <button onclick="removeFromCart(${index})" class="text-red-400 hover:text-red-300"><i class="fas fa-trash text-xs"></i></button>
                    </div>
                </div>`;
            });
            
            list.innerHTML = html;
            totalEl.innerText = total.toLocaleString();
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartUI();
        }

        function toggleCart() {
            const modal = document.getElementById('cartModal');
            if (modal.classList.contains('hidden')) {
                modal.classList.remove('hidden');
            } else {
                modal.classList.add('hidden');
            }
        }

        // 4. Admin Toggle
        function toggleAdmin() {
            adminMode = !adminMode;
            const panel = document.getElementById('investorPanel');
            
            if (adminMode) {
                panel.classList.remove('hidden');
                document.body.style.border = "4px solid #eab308"; // Gold border indicator
                showToast("Admin Mode Active");
            } else {
                panel.classList.add('hidden');
                document.body.style.border = "none";
                showToast("Admin Mode Exit");
            }
            renderMenu(); // Re-render to show/hide edit inputs
        }

        // 5. Checkout
        function checkoutWhatsApp() {
            if (cart.length === 0) return;
            
            let msg = "Hello! I'd like to order:%0A";
            let total = 0;
            cart.forEach(item => {
                msg += `- ${item.name} (₦${item.price})%0A`;
                total += item.price;
            });
            msg += `%0ATotal: ₦${total.toLocaleString()}`;
            
            window.open(`https://wa.me/${STORE_CONFIG.whatsappNumber}?text=${msg}`, '_blank');
        }

        // 6. UI Utilities
        function showToast(text) {
            const t = document.getElementById('toast');
            t.querySelector('span').innerText = text;
            t.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => {
                t.classList.add('translate-y-20', 'opacity-0');
            }, 2000);
        }

        function showProductDetails(id) {
            // Placeholder for modal expansion if needed later
            console.log("View product", id);
        }

        // INITIALIZE
        window.onload = renderMenu;

    </script>
</body>
</html>
